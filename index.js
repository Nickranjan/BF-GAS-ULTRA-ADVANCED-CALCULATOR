
document.addEventListener("DOMContentLoaded",function(){const e=.2,t=1.5,n=document.getElementById("bfgCalculatorForm"),a=document.getElementById("warningMessages"),o=document.getElementById("showDetailsBtn"),u=document.getElementById("detailedResults");function c(e){const t=document.createElement("div");t.className="warning",t.textContent=e,a.appendChild(t)}function r(e){const t=e=>{const t=parseFloat(e.toFixed(2));return isNaN(t)?0:t};document.getElementById("totalBfGasGeneration").textContent=t(24*e.bfGasGeneration).toLocaleString(),document.getElementById("avgBfGasGeneration").textContent=t(e.bfGasGeneration).toLocaleString(),document.getElementById("hourlyWindVolume").textContent=t(e.hourlyWindVolume).toLocaleString(),document.getElementById("stoveChangeOver").textContent=t(e.stoveChangeOverVol).toLocaleString(),document.getElementById("humidity").textContent=t(e.humidity).toLocaleString(),document.getElementById("dryWindVolume").textContent=t(e.dryWindVol).toLocaleString(),document.getElementById("oxygenEnrichmentResult").textContent=t(e.oxygenEnrichment).toLocaleString(),document.getElementById("coResult").textContent=t(e.coPercentage).toLocaleString(),document.getElementById("co2Result").textContent=t(e.co2Percentage).toLocaleString(),document.getElementById("h2Result").textContent=t(e.h2Percentage).toLocaleString(),document.getElementById("o2Result").textContent=t(e.o2Percentage).toLocaleString(),document.getElementById("otherGases").textContent=t(e.otherGases).toLocaleString(),document.getElementById("resultsPanel").style.display="block"}function i(t,n,a){let o=1.4e6;const u=18,c=8.314,r=1,i=273.15,s=Math.round(t);if(s<1119||s>=1100)o=1.4e6;else if(s>1130||s<=1150)o=1.54e6;else{o=1.4e6;for(let e=1119;e<1130;e++)if(o+=1e4,s==e)break}const l=t+273.15,d=a*o*u/(c*l);return d*(i/l)*(r/n)}n.addEventListener("submit",function(n){n.preventDefault(),a.innerHTML="";const o=parseFloat(document.getElementById("windVolume").value),u=parseFloat(document.getElementById("temperature").value);let s=parseFloat(document.getElementById("pressure").value);const l=parseFloat(document.getElementById("oxygenEnrichment").value),d=parseFloat(document.getElementById("coPercentage").value),m=parseFloat(document.getElementById("co2Percentage").value),g=parseFloat(document.getElementById("h2Percentage").value),p=parseFloat(document.getElementById("o2Percentage").value),h=o/24,v=12e4/55,f=s/1.013,y=i(u,f,e),b=h*(1-22.4/18*y/1e3)-v,k=d+m+g+p+t;let w=k;k>=100&&(w=95,c("The sum of gas percentages exceeds 100%. Using 95% as maximum for calculation."));const x=b*(100-21+l)/(100-w);r({hourlyWindVolume:h,stoveChangeOverVol:v,humidity:y,dryWindVol:b,oxygenEnrichment:l,coPercentage:d,co2Percentage:m,h2Percentage:g,o2Percentage:p,otherGases:t,bfGasGeneration:x})}),o.addEventListener("click",function(){u.classList.toggle("visible"),o.textContent=u.classList.contains("visible")?"Hide Parameters":"Show All Parameters"})});
